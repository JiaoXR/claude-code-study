{"ast":null,"code":"var _jsxFileName = \"/Users/jiaoxiangru/Code/Claude/word-game/word-game/src/components/TestMode.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ArrowLeft, RotateCcw } from 'lucide-react';\nimport { getRandomWords } from '../data/words';\nimport { QuizQuestion } from './QuizQuestion';\nimport { PixelButton } from './ui/PixelButton';\nimport { PixelCard } from './ui/PixelCard';\nimport { HealthBar } from './ui/HealthBar';\nimport { ScoreDisplay } from './ui/ScoreDisplay';\nimport { storageService } from '../utils/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TestMode = ({\n  onBack,\n  difficulty = 'medium',\n  questionsPerRound = 10\n}) => {\n  _s();\n  const [gameState, setGameState] = useState('starting');\n  const [words, setWords] = useState([]);\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\n  const [stats, setStats] = useState({\n    score: 0,\n    combo: 0,\n    maxCombo: 0,\n    health: 100,\n    maxHealth: 100,\n    correctAnswers: 0,\n    totalQuestions: questionsPerRound,\n    currentQuestion: 1\n  });\n  const [sessionStartTime, setSessionStartTime] = useState(new Date());\n  const [explosions, setExplosions] = useState([]);\n  useEffect(() => {\n    if (gameState === 'starting') {\n      initializeGame();\n    }\n  }, [gameState, difficulty, questionsPerRound]);\n  const initializeGame = () => {\n    const selectedWords = getRandomWords(questionsPerRound);\n    setWords(selectedWords);\n    setCurrentWordIndex(0);\n    setStats({\n      score: 0,\n      combo: 0,\n      maxCombo: 0,\n      health: 100,\n      maxHealth: 100,\n      correctAnswers: 0,\n      totalQuestions: questionsPerRound,\n      currentQuestion: 1\n    });\n    setSessionStartTime(new Date());\n  };\n  const startGame = () => {\n    setGameState('playing');\n  };\n  const handleAnswer = (isCorrect, selectedAnswer) => {\n    const currentWord = words[currentWordIndex];\n\n    // 更新单词学习进度\n    storageService.updateWordProgress(currentWord.id, {\n      correctCount: isCorrect ? 1 : 0,\n      incorrectCount: isCorrect ? 0 : 1\n    });\n    setStats(prevStats => {\n      const newStats = {\n        ...prevStats\n      };\n      if (isCorrect) {\n        // 答对了\n        const comboBonus = Math.floor(prevStats.combo / 5) * 10;\n        const baseScore = getDifficultyScore(currentWord.difficulty);\n        const totalScore = baseScore + comboBonus;\n        newStats.score += totalScore;\n        newStats.combo += 1;\n        newStats.maxCombo = Math.max(newStats.maxCombo, newStats.combo);\n        newStats.correctAnswers += 1;\n\n        // 创建爆炸效果\n        createExplosion();\n      } else {\n        // 答错了\n        newStats.combo = 0;\n        newStats.health = Math.max(0, newStats.health - 20);\n      }\n      newStats.currentQuestion += 1;\n      return newStats;\n    });\n\n    // 移动到下一题或结束游戏\n    setTimeout(() => {\n      if (currentWordIndex < words.length - 1) {\n        setCurrentWordIndex(currentWordIndex + 1);\n      } else {\n        finishGame();\n      }\n    }, 2000);\n  };\n  const getDifficultyScore = wordDifficulty => {\n    const baseScores = {\n      easy: 10,\n      medium: 15,\n      hard: 25\n    };\n    const difficultyMultiplier = wordDifficulty;\n    switch (difficulty) {\n      case 'easy':\n        return baseScores.easy * difficultyMultiplier;\n      case 'medium':\n        return baseScores.medium * difficultyMultiplier;\n      case 'hard':\n        return baseScores.hard * difficultyMultiplier;\n      default:\n        return baseScores.medium * difficultyMultiplier;\n    }\n  };\n  const createExplosion = () => {\n    const newExplosion = {\n      id: Date.now(),\n      x: Math.random() * window.innerWidth,\n      y: Math.random() * window.innerHeight\n    };\n    setExplosions(prev => [...prev, newExplosion]);\n\n    // 移除爆炸效果\n    setTimeout(() => {\n      setExplosions(prev => prev.filter(exp => exp.id !== newExplosion.id));\n    }, 1000);\n  };\n  const finishGame = () => {\n    const endTime = new Date();\n    const duration = endTime.getTime() - sessionStartTime.getTime();\n\n    // 保存学习会话\n    const session = {\n      id: Date.now().toString(),\n      mode: 'test',\n      wordsStudied: words.map(w => w.id),\n      correctAnswers: stats.correctAnswers,\n      totalQuestions: stats.totalQuestions,\n      score: stats.score,\n      maxCombo: stats.maxCombo,\n      startTime: sessionStartTime,\n      endTime,\n      duration\n    };\n    storageService.saveStudySession(session);\n\n    // 更新用户统计\n    const userStats = storageService.getUserStats();\n    const newStats = {\n      ...userStats,\n      totalTestsTaken: userStats.totalTestsTaken + 1,\n      averageScore: Math.round((userStats.averageScore * userStats.totalTestsTaken + stats.score) / (userStats.totalTestsTaken + 1)),\n      maxCombo: Math.max(userStats.maxCombo, stats.maxCombo),\n      totalStudyTime: userStats.totalStudyTime + duration,\n      experience: userStats.experience + Math.floor(stats.score / 10)\n    };\n    storageService.saveUserStats(newStats);\n    setGameState('finished');\n  };\n  const restartGame = () => {\n    setGameState('starting');\n    initializeGame();\n    setTimeout(() => setGameState('playing'), 100);\n  };\n  const getAccuracyRate = () => {\n    return stats.currentQuestion > 1 ? Math.round(stats.correctAnswers / (stats.currentQuestion - 1) * 100) : 0;\n  };\n  const getPerformanceMessage = () => {\n    const accuracy = getAccuracyRate();\n    if (accuracy >= 90) return '完美表现！你是真正的词汇王者！';\n    if (accuracy >= 80) return '优秀表现！继续保持这个水平！';\n    if (accuracy >= 70) return '良好表现！还有提升空间！';\n    if (accuracy >= 60) return '不错的尝试！多练习会更好！';\n    return '不要放弃，战士！失败是成功之母！';\n  };\n  const currentWord = words[currentWordIndex];\n\n  // 游戏开始界面\n  if (gameState === 'starting') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen pixel-grid-bg flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(PixelCard, {\n        className: \"text-center max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pixel-font\",\n          style: {\n            fontSize: '16px',\n            color: 'var(--primary-yellow)',\n            marginBottom: '16px'\n          },\n          children: \"\\uD83C\\uDFAF \\u51C6\\u5907\\u5F00\\u59CB\\u6311\\u6218\\uFF01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pixel-font\",\n            style: {\n              fontSize: '10px',\n              color: 'var(--text-white)'\n            },\n            children: [\"\\u2022 \\u6311\\u6218\\u6A21\\u5F0F\\uFF1A\", difficulty === 'easy' ? '简单' : difficulty === 'medium' ? '中等' : '困难']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pixel-font\",\n            style: {\n              fontSize: '10px',\n              color: 'var(--text-white)'\n            },\n            children: [\"\\u2022 \\u9898\\u76EE\\u6570\\u91CF\\uFF1A\", questionsPerRound, \" \\u9898\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pixel-font\",\n            style: {\n              fontSize: '10px',\n              color: 'var(--text-white)'\n            },\n            children: \"\\u2022 \\u6BCF\\u9898\\u65F6\\u95F4\\uFF1A30 \\u79D2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pixel-font\",\n            style: {\n              fontSize: '10px',\n              color: 'var(--text-gray)'\n            },\n            children: \"\\u7B54\\u5BF9\\u83B7\\u5F97\\u5206\\u6570\\uFF0C\\u8FDE\\u51FB\\u6709\\u989D\\u5916\\u5956\\u52B1\\uFF01\\u7B54\\u9519\\u6263\\u8840\\u91CF\\uFF01\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(PixelButton, {\n            onClick: onBack,\n            variant: \"warning\",\n            children: \"\\u8FD4\\u56DE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(PixelButton, {\n            onClick: startGame,\n            variant: \"success\",\n            children: \"\\u5F00\\u59CB\\u6311\\u6218\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 游戏进行中界面\n  if (gameState === 'playing' && currentWord) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen pixel-grid-bg\",\n      children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: explosions.map(explosion => /*#__PURE__*/_jsxDEV(motion.div, {\n          className: \"pixel-explosion fixed pointer-events-none z-50\",\n          style: {\n            left: explosion.x,\n            top: explosion.y\n          },\n          initial: {\n            scale: 0,\n            opacity: 1\n          },\n          animate: {\n            scale: [0, 1.5, 0],\n            opacity: [1, 0.8, 0]\n          },\n          exit: {\n            opacity: 0\n          },\n          transition: {\n            duration: 1\n          }\n        }, explosion.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b-2\",\n        style: {\n          borderColor: 'var(--pixel-border)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between max-w-6xl mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(PixelButton, {\n            onClick: onBack,\n            variant: \"warning\",\n            className: \"text-xs\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 15\n            }, this), \"\\u9000\\u51FA\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(ScoreDisplay, {\n              score: stats.score,\n              combo: stats.combo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-32\",\n              children: /*#__PURE__*/_jsxDEV(HealthBar, {\n                current: stats.health,\n                max: stats.maxHealth,\n                label: \"\\u8840\\u91CF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 p-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-4xl mx-auto\",\n          children: /*#__PURE__*/_jsxDEV(AnimatePresence, {\n            mode: \"wait\",\n            children: /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                opacity: 0,\n                x: 300\n              },\n              animate: {\n                opacity: 1,\n                x: 0\n              },\n              exit: {\n                opacity: 0,\n                x: -300\n              },\n              transition: {\n                type: 'spring',\n                stiffness: 300,\n                damping: 30\n              },\n              children: /*#__PURE__*/_jsxDEV(QuizQuestion, {\n                word: currentWord,\n                onAnswer: handleAnswer,\n                questionNumber: stats.currentQuestion,\n                totalQuestions: stats.totalQuestions,\n                timeLimit: 30\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this)\n            }, currentWordIndex, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 7\n    }, this);\n  }\n\n  // 游戏结束界面\n  if (gameState === 'finished') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen pixel-grid-bg flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(PixelCard, {\n        className: \"text-center max-w-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pixel-font\",\n          style: {\n            fontSize: '18px',\n            color: 'var(--primary-yellow)',\n            marginBottom: '16px'\n          },\n          children: \"\\uD83C\\uDFC6 \\u6311\\u6218\\u5B8C\\u6210\\uFF01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-2 gap-4 mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--text-gray)',\n                fontSize: '8px',\n                marginBottom: '4px'\n              },\n              children: \"\\u6700\\u7EC8\\u5F97\\u5206\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--primary-yellow)',\n                fontSize: '20px'\n              },\n              children: stats.score.toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--text-gray)',\n                fontSize: '8px',\n                marginBottom: '4px'\n              },\n              children: \"\\u6700\\u9AD8\\u8FDE\\u51FB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--combo-purple)',\n                fontSize: '20px'\n              },\n              children: [stats.maxCombo, \"X\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--text-gray)',\n                fontSize: '8px',\n                marginBottom: '4px'\n              },\n              children: \"\\u6B63\\u786E\\u7387\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--success-green)',\n                fontSize: '20px'\n              },\n              children: [getAccuracyRate(), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--text-gray)',\n                fontSize: '8px',\n                marginBottom: '4px'\n              },\n              children: \"\\u7B54\\u5BF9\\u9898\\u6570\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pixel-font\",\n              style: {\n                color: 'var(--primary-blue)',\n                fontSize: '20px'\n              },\n              children: [stats.correctAnswers, \"/\", stats.totalQuestions]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pixel-font\",\n          style: {\n            fontSize: '10px',\n            color: 'var(--text-white)',\n            marginBottom: '20px',\n            lineHeight: '1.4'\n          },\n          children: getPerformanceMessage()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-2 justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(PixelButton, {\n            onClick: onBack,\n            variant: \"warning\",\n            children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), \"\\u8FD4\\u56DE\\u4E3B\\u83DC\\u5355\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(PixelButton, {\n            onClick: restartGame,\n            variant: \"success\",\n            children: [/*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 16,\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), \"\\u518D\\u6765\\u4E00\\u5C40\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s(TestMode, \"aTZUPLLCdZ+I82+pcPOwqeUix7A=\");\n_c = TestMode;\nvar _c;\n$RefreshReg$(_c, \"TestMode\");","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","ArrowLeft","RotateCcw","getRandomWords","QuizQuestion","PixelButton","PixelCard","HealthBar","ScoreDisplay","storageService","jsxDEV","_jsxDEV","TestMode","onBack","difficulty","questionsPerRound","_s","gameState","setGameState","words","setWords","currentWordIndex","setCurrentWordIndex","stats","setStats","score","combo","maxCombo","health","maxHealth","correctAnswers","totalQuestions","currentQuestion","sessionStartTime","setSessionStartTime","Date","explosions","setExplosions","initializeGame","selectedWords","startGame","handleAnswer","isCorrect","selectedAnswer","currentWord","updateWordProgress","id","correctCount","incorrectCount","prevStats","newStats","comboBonus","Math","floor","baseScore","getDifficultyScore","totalScore","max","createExplosion","setTimeout","length","finishGame","wordDifficulty","baseScores","easy","medium","hard","difficultyMultiplier","newExplosion","now","x","random","window","innerWidth","y","innerHeight","prev","filter","exp","endTime","duration","getTime","session","toString","mode","wordsStudied","map","w","startTime","saveStudySession","userStats","getUserStats","totalTestsTaken","averageScore","round","totalStudyTime","experience","saveUserStats","restartGame","getAccuracyRate","getPerformanceMessage","accuracy","className","children","style","fontSize","color","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","onClick","variant","explosion","div","left","top","initial","scale","opacity","animate","exit","transition","borderColor","size","current","label","type","stiffness","damping","word","onAnswer","questionNumber","timeLimit","toLocaleString","lineHeight","_c","$RefreshReg$"],"sources":["/Users/jiaoxiangru/Code/Claude/word-game/word-game/src/components/TestMode.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ArrowLeft, RotateCcw } from 'lucide-react';\nimport { Word, StudySession } from '../types/word';\nimport { getRandomWords } from '../data/words';\nimport { QuizQuestion } from './QuizQuestion';\nimport { PixelButton } from './ui/PixelButton';\nimport { PixelCard } from './ui/PixelCard';\nimport { PixelModal } from './ui/PixelModal';\nimport { HealthBar } from './ui/HealthBar';\nimport { ScoreDisplay } from './ui/ScoreDisplay';\nimport { storageService } from '../utils/storage';\n\ninterface TestModeProps {\n  onBack: () => void;\n  difficulty?: 'easy' | 'medium' | 'hard';\n  questionsPerRound?: number;\n}\n\ninterface GameStats {\n  score: number;\n  combo: number;\n  maxCombo: number;\n  health: number;\n  maxHealth: number;\n  correctAnswers: number;\n  totalQuestions: number;\n  currentQuestion: number;\n}\n\nexport const TestMode: React.FC<TestModeProps> = ({\n  onBack,\n  difficulty = 'medium',\n  questionsPerRound = 10,\n}) => {\n  const [gameState, setGameState] = useState<'starting' | 'playing' | 'finished'>('starting');\n  const [words, setWords] = useState<Word[]>([]);\n  const [currentWordIndex, setCurrentWordIndex] = useState(0);\n  const [stats, setStats] = useState<GameStats>({\n    score: 0,\n    combo: 0,\n    maxCombo: 0,\n    health: 100,\n    maxHealth: 100,\n    correctAnswers: 0,\n    totalQuestions: questionsPerRound,\n    currentQuestion: 1,\n  });\n  const [sessionStartTime, setSessionStartTime] = useState<Date>(new Date());\n  const [explosions, setExplosions] = useState<Array<{ id: number; x: number; y: number }>>([]);\n\n  useEffect(() => {\n    if (gameState === 'starting') {\n      initializeGame();\n    }\n  }, [gameState, difficulty, questionsPerRound]);\n\n  const initializeGame = () => {\n    const selectedWords = getRandomWords(questionsPerRound);\n    setWords(selectedWords);\n    setCurrentWordIndex(0);\n    setStats({\n      score: 0,\n      combo: 0,\n      maxCombo: 0,\n      health: 100,\n      maxHealth: 100,\n      correctAnswers: 0,\n      totalQuestions: questionsPerRound,\n      currentQuestion: 1,\n    });\n    setSessionStartTime(new Date());\n  };\n\n  const startGame = () => {\n    setGameState('playing');\n  };\n\n  const handleAnswer = (isCorrect: boolean, selectedAnswer: string) => {\n    const currentWord = words[currentWordIndex];\n    \n    // 更新单词学习进度\n    storageService.updateWordProgress(currentWord.id, {\n      correctCount: isCorrect ? 1 : 0,\n      incorrectCount: isCorrect ? 0 : 1,\n    });\n\n    setStats(prevStats => {\n      const newStats = { ...prevStats };\n      \n      if (isCorrect) {\n        // 答对了\n        const comboBonus = Math.floor(prevStats.combo / 5) * 10;\n        const baseScore = getDifficultyScore(currentWord.difficulty);\n        const totalScore = baseScore + comboBonus;\n        \n        newStats.score += totalScore;\n        newStats.combo += 1;\n        newStats.maxCombo = Math.max(newStats.maxCombo, newStats.combo);\n        newStats.correctAnswers += 1;\n\n        // 创建爆炸效果\n        createExplosion();\n      } else {\n        // 答错了\n        newStats.combo = 0;\n        newStats.health = Math.max(0, newStats.health - 20);\n      }\n\n      newStats.currentQuestion += 1;\n      return newStats;\n    });\n\n    // 移动到下一题或结束游戏\n    setTimeout(() => {\n      if (currentWordIndex < words.length - 1) {\n        setCurrentWordIndex(currentWordIndex + 1);\n      } else {\n        finishGame();\n      }\n    }, 2000);\n  };\n\n  const getDifficultyScore = (wordDifficulty: number): number => {\n    const baseScores = { easy: 10, medium: 15, hard: 25 };\n    const difficultyMultiplier = wordDifficulty;\n    \n    switch (difficulty) {\n      case 'easy':\n        return baseScores.easy * difficultyMultiplier;\n      case 'medium':\n        return baseScores.medium * difficultyMultiplier;\n      case 'hard':\n        return baseScores.hard * difficultyMultiplier;\n      default:\n        return baseScores.medium * difficultyMultiplier;\n    }\n  };\n\n  const createExplosion = () => {\n    const newExplosion = {\n      id: Date.now(),\n      x: Math.random() * window.innerWidth,\n      y: Math.random() * window.innerHeight,\n    };\n    \n    setExplosions(prev => [...prev, newExplosion]);\n    \n    // 移除爆炸效果\n    setTimeout(() => {\n      setExplosions(prev => prev.filter(exp => exp.id !== newExplosion.id));\n    }, 1000);\n  };\n\n  const finishGame = () => {\n    const endTime = new Date();\n    const duration = endTime.getTime() - sessionStartTime.getTime();\n    \n    // 保存学习会话\n    const session: StudySession = {\n      id: Date.now().toString(),\n      mode: 'test',\n      wordsStudied: words.map(w => w.id),\n      correctAnswers: stats.correctAnswers,\n      totalQuestions: stats.totalQuestions,\n      score: stats.score,\n      maxCombo: stats.maxCombo,\n      startTime: sessionStartTime,\n      endTime,\n      duration,\n    };\n    \n    storageService.saveStudySession(session);\n    \n    // 更新用户统计\n    const userStats = storageService.getUserStats();\n    const newStats = {\n      ...userStats,\n      totalTestsTaken: userStats.totalTestsTaken + 1,\n      averageScore: Math.round(\n        (userStats.averageScore * userStats.totalTestsTaken + stats.score) / \n        (userStats.totalTestsTaken + 1)\n      ),\n      maxCombo: Math.max(userStats.maxCombo, stats.maxCombo),\n      totalStudyTime: userStats.totalStudyTime + duration,\n      experience: userStats.experience + Math.floor(stats.score / 10),\n    };\n    \n    storageService.saveUserStats(newStats);\n    \n    setGameState('finished');\n  };\n\n  const restartGame = () => {\n    setGameState('starting');\n    initializeGame();\n    setTimeout(() => setGameState('playing'), 100);\n  };\n\n  const getAccuracyRate = () => {\n    return stats.currentQuestion > 1 \n      ? Math.round((stats.correctAnswers / (stats.currentQuestion - 1)) * 100)\n      : 0;\n  };\n\n  const getPerformanceMessage = () => {\n    const accuracy = getAccuracyRate();\n    if (accuracy >= 90) return '完美表现！你是真正的词汇王者！';\n    if (accuracy >= 80) return '优秀表现！继续保持这个水平！';\n    if (accuracy >= 70) return '良好表现！还有提升空间！';\n    if (accuracy >= 60) return '不错的尝试！多练习会更好！';\n    return '不要放弃，战士！失败是成功之母！';\n  };\n\n  const currentWord = words[currentWordIndex];\n\n  // 游戏开始界面\n  if (gameState === 'starting') {\n    return (\n      <div className=\"min-h-screen pixel-grid-bg flex items-center justify-center p-4\">\n        <PixelCard className=\"text-center max-w-md\">\n          <div className=\"pixel-font\" style={{ \n            fontSize: '16px', \n            color: 'var(--primary-yellow)',\n            marginBottom: '16px'\n          }}>\n            🎯 准备开始挑战！\n          </div>\n          \n          <div className=\"space-y-4 mb-6\">\n            <div className=\"pixel-font\" style={{ \n              fontSize: '10px', \n              color: 'var(--text-white)' \n            }}>\n              • 挑战模式：{difficulty === 'easy' ? '简单' : difficulty === 'medium' ? '中等' : '困难'}\n            </div>\n            <div className=\"pixel-font\" style={{ \n              fontSize: '10px', \n              color: 'var(--text-white)' \n            }}>\n              • 题目数量：{questionsPerRound} 题\n            </div>\n            <div className=\"pixel-font\" style={{ \n              fontSize: '10px', \n              color: 'var(--text-white)' \n            }}>\n              • 每题时间：30 秒\n            </div>\n            <div className=\"pixel-font\" style={{ \n              fontSize: '10px', \n              color: 'var(--text-gray)' \n            }}>\n              答对获得分数，连击有额外奖励！答错扣血量！\n            </div>\n          </div>\n          \n          <div className=\"flex gap-2 justify-center\">\n            <PixelButton onClick={onBack} variant=\"warning\">\n              返回\n            </PixelButton>\n            <PixelButton onClick={startGame} variant=\"success\">\n              开始挑战\n            </PixelButton>\n          </div>\n        </PixelCard>\n      </div>\n    );\n  }\n\n  // 游戏进行中界面\n  if (gameState === 'playing' && currentWord) {\n    return (\n      <div className=\"min-h-screen pixel-grid-bg\">\n        {/* 爆炸效果 */}\n        <AnimatePresence>\n          {explosions.map(explosion => (\n            <motion.div\n              key={explosion.id}\n              className=\"pixel-explosion fixed pointer-events-none z-50\"\n              style={{ left: explosion.x, top: explosion.y }}\n              initial={{ scale: 0, opacity: 1 }}\n              animate={{ scale: [0, 1.5, 0], opacity: [1, 0.8, 0] }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 1 }}\n            />\n          ))}\n        </AnimatePresence>\n\n        {/* 顶部状态栏 */}\n        <div className=\"p-4 border-b-2\" style={{ borderColor: 'var(--pixel-border)' }}>\n          <div className=\"flex items-center justify-between max-w-6xl mx-auto\">\n            <PixelButton onClick={onBack} variant=\"warning\" className=\"text-xs\">\n              <ArrowLeft size={12} />\n              退出\n            </PixelButton>\n\n            <div className=\"flex items-center gap-6\">\n              <ScoreDisplay score={stats.score} combo={stats.combo} />\n              \n              <div className=\"w-32\">\n                <HealthBar\n                  current={stats.health}\n                  max={stats.maxHealth}\n                  label=\"血量\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 游戏主区域 */}\n        <div className=\"flex-1 p-4\">\n          <div className=\"max-w-4xl mx-auto\">\n            <AnimatePresence mode=\"wait\">\n              <motion.div\n                key={currentWordIndex}\n                initial={{ opacity: 0, x: 300 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -300 }}\n                transition={{ type: 'spring', stiffness: 300, damping: 30 }}\n              >\n                <QuizQuestion\n                  word={currentWord}\n                  onAnswer={handleAnswer}\n                  questionNumber={stats.currentQuestion}\n                  totalQuestions={stats.totalQuestions}\n                  timeLimit={30}\n                />\n              </motion.div>\n            </AnimatePresence>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // 游戏结束界面\n  if (gameState === 'finished') {\n    return (\n      <div className=\"min-h-screen pixel-grid-bg flex items-center justify-center p-4\">\n        <PixelCard className=\"text-center max-w-lg\">\n          <div className=\"pixel-font\" style={{ \n            fontSize: '18px', \n            color: 'var(--primary-yellow)',\n            marginBottom: '16px'\n          }}>\n            🏆 挑战完成！\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4 mb-6\">\n            <div className=\"text-center\">\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--text-gray)', \n                fontSize: '8px',\n                marginBottom: '4px'\n              }}>\n                最终得分\n              </div>\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--primary-yellow)', \n                fontSize: '20px'\n              }}>\n                {stats.score.toLocaleString()}\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--text-gray)', \n                fontSize: '8px',\n                marginBottom: '4px'\n              }}>\n                最高连击\n              </div>\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--combo-purple)', \n                fontSize: '20px'\n              }}>\n                {stats.maxCombo}X\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--text-gray)', \n                fontSize: '8px',\n                marginBottom: '4px'\n              }}>\n                正确率\n              </div>\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--success-green)', \n                fontSize: '20px'\n              }}>\n                {getAccuracyRate()}%\n              </div>\n            </div>\n            \n            <div className=\"text-center\">\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--text-gray)', \n                fontSize: '8px',\n                marginBottom: '4px'\n              }}>\n                答对题数\n              </div>\n              <div className=\"pixel-font\" style={{ \n                color: 'var(--primary-blue)', \n                fontSize: '20px'\n              }}>\n                {stats.correctAnswers}/{stats.totalQuestions}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"pixel-font\" style={{ \n            fontSize: '10px', \n            color: 'var(--text-white)',\n            marginBottom: '20px',\n            lineHeight: '1.4'\n          }}>\n            {getPerformanceMessage()}\n          </div>\n\n          <div className=\"flex gap-2 justify-center\">\n            <PixelButton onClick={onBack} variant=\"warning\">\n              <ArrowLeft size={16} className=\"mr-2\" />\n              返回主菜单\n            </PixelButton>\n            <PixelButton onClick={restartGame} variant=\"success\">\n              <RotateCcw size={16} className=\"mr-2\" />\n              再来一局\n            </PixelButton>\n          </div>\n        </PixelCard>\n      </div>\n    );\n  }\n\n  return null;\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}